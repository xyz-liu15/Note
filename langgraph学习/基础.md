
```jupyter lab
%%capture --no-stderr
```

`%%capture --no-stderr` æ˜¯ Jupyter Lab/IPython ä¸­çš„ä¸€ä¸ªå•å…ƒæ ¼é­”æ³•å‘½ä»¤ï¼Œä¸»è¦ç”¨äºæ•è·å•å…ƒæ ¼æ‰§è¡Œæ—¶çš„è¾“å‡ºï¼ŒåŒæ—¶å¿½ç•¥æ ‡å‡†é”™è¯¯(stderr)ã€‚

1. **å‚æ•°è¯´æ˜**
    - `--no-stderr`ï¼šæ˜ç¡®æŒ‡å®šä¸æ•è·é”™è¯¯è¾“å‡ºï¼ˆé»˜è®¤ä¼šåŒæ—¶æ•è·stdoutå’Œstderrï¼‰[1](https://stackoverflow.com/questions/57568861/how-to-capture-everything-that-is-printed-in-a-jupyter-notebook-based-on-ipython)[3](https://github.com/jupyterlab/jupyterlab/issues/11775)
    - `cap`ï¼šå¯é€‰å˜é‡åï¼Œç”¨äºå­˜å‚¨æ•è·ç»“æœï¼ˆç±»å‹ä¸º`CapturedIO`ï¼‰ï¼Œå¯é€šè¿‡`cap.stdout`è®¿é—®æ–‡æœ¬è¾“å‡ºÂ [4](https://ipython.readthedocs.io/en/stable/interactive/magics.html)
2. **å…¸å‹ç”¨é€”**
    - æŠ‘åˆ¶é”™è¯¯è¾“å‡ºå¹²æ‰°ï¼ˆå¦‚ç¬¬ä¸‰æ–¹åº“çš„è­¦å‘Šï¼‰[3](https://github.com/jupyterlab/jupyterlab/issues/11775)
    - é€‰æ‹©æ€§ä¿å­˜è¾“å‡ºå†…å®¹ï¼ˆä¾‹å¦‚ä»…éœ€è®°å½•printç»“æœï¼‰[1](https://stackoverflow.com/questions/57568861/how-to-capture-everything-that-is-printed-in-a-jupyter-notebook-based-on-ipython)
    - é…åˆè‡ªåŠ¨åŒ–æµ‹è¯•æ—¶æ§åˆ¶è¾“å‡ºæ•è·èŒƒå›´Â [4](https://ipython.readthedocs.io/en/stable/interactive/magics.html)
3. **æ³¨æ„äº‹é¡¹**
    - å¿…é¡»ä½œä¸ºå•å…ƒæ ¼é¦–è¡Œå‘½ä»¤Â [1](https://stackoverflow.com/questions/57568861/how-to-capture-everything-that-is-printed-in-a-jupyter-notebook-based-on-ipython)
    - æ•è·çš„é”™è¯¯ä»ä¼šåœ¨åå°äº§ç”Ÿï¼Œåªæ˜¯ä¸ä¼šæ˜¾ç¤ºæˆ–å­˜å‚¨Â [3](https://github.com/jupyterlab/jupyterlab/issues/11775)
    - ç±»ä¼¼åŠŸèƒ½è¿˜æœ‰`%%capture --no-stdout`ï¼ˆä»…æ•è·é”™è¯¯ï¼‰[4](https://ipython.readthedocs.io/en/stable/interactive/magics.html)

```jupyter lab
import os, getpass


def get_api_kei(key):
	"""è‡ªå®šä¹‰å‡½æ•°ï¼Œè·å–APIå¯†é’¥"""
    if not os.environ.get(key):
        os.environ[key] = getpass.getpass(f"{key}: ")

_set_env("DEEPSEEK_API_KEY")
```

```jupyter lab
from langchain_deepseek import ChatDeepSeek


model = ChatDeepSeek(
					model = "deepseek-chat",
					temperature = 0.7
)
```

LangChain ä¸­çš„èŠå¤©æ¨¡å‹è‡ªå¸¦ä¸€äº›é»˜è®¤æ–¹æ³•ã€‚æˆ‘ä»¬åŸºæœ¬ä¸Šä¼šä½¿ç”¨è¿™äº›æ–¹æ³•ã€‚

- `stream`Â : è¿”å›å“åº”çš„ç‰‡æ®µ
- `invoke`Â è°ƒç”¨é“¾å¼è¾“å…¥

èŠå¤©æ¨¡å‹ä»¥æ¶ˆæ¯ä¸ºè¾“å…¥ã€‚æ¯æ¡æ¶ˆæ¯éƒ½æœ‰è§’è‰²ï¼ˆæŒ‡æ˜è¯´è¯è€…ï¼‰å’Œå†…å®¹å±æ€§ã€‚

```jupyter lab
from langchain_messages import HumanMessage

msg = HumanMessage(content = "ä½ å¥½ï¼Œæˆ‘æœ‰ä¸€ä¸ªå¸½è¡«ã€‚",name = "åˆ˜åäº”")

messages = [msg]

model.invoke(messages)
```

```markdown
AIMessage(content='ä½ å¥½ï¼å¬èµ·æ¥ä½ æœ‰ä¸€ä»¶å¸½è¡«ï¼ŒæŒºå®ç”¨çš„å‘¢ï½ å¸½è¡«å¾ˆé€‚åˆæ—¥å¸¸æ­é…ï¼Œä¼‘é—²åˆèˆ’é€‚ã€‚ä½ æ˜¯æƒ³äº†è§£å®ƒçš„ç©¿æ­å»ºè®®ã€æ¸…æ´—æ–¹å¼ï¼Œè¿˜æ˜¯æœ‰ä»€ä¹ˆç‰¹åˆ«çš„é—®é¢˜éœ€è¦å¸®å¿™å‘¢ï¼Ÿæ¯”å¦‚ï¼š\n\n1. **ç©¿æ­çµæ„Ÿ**ï¼šæƒ³æ­é…ç‰›ä»”è£¤ã€è¿åŠ¨è£¤ï¼Œè¿˜æ˜¯å ç©¿å¤–å¥—ï¼Ÿ  \n2. **åŠŸèƒ½æ€§**ï¼šéœ€è¦é˜²é£/é˜²æ°´æ¬¾æ¨èï¼Œæˆ–è€ƒè™‘å¸¦éšè—å£è¢‹çš„è®¾è®¡ï¼Ÿ  \n3. **ä¿å…»é—®é¢˜**ï¼šå¸½è¡«èµ·çƒã€å¸½å­å˜å½¢æ€ä¹ˆåŠï¼Ÿ  \n\næˆ–è€…ä½ åªæ˜¯éšä¾¿èŠèŠï¼ŸğŸ˜„ å‘Šè¯‰æˆ‘æ›´å¤šç»†èŠ‚ï¼Œå¸®ä½ æ›´ç²¾å‡†è§£ç­”ï¼', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 120, 'prompt_tokens': 9, 'total_tokens': 129, 'completion_tokens_details': None, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': 0}, 'prompt_cache_hit_tokens': 0, 'prompt_cache_miss_tokens': 9}, 'model_name': 'deepseek-chat', 'system_fingerprint': 'fp_8802369eaa_prod0425fp8', 'id': '6cba3350-bba9-4c0a-a681-8d42f9d7cd71', 'service_tier': None, 'finish_reason': 'stop', 'logprobs': None}, id='run--a5ef619f-2f16-4d3d-b37c-68ac18156968-0', usage_metadata={'input_tokens': 9, 'output_tokens': 120, 'total_tokens': 129, 'input_token_details': {'cache_read': 0}, 'output_token_details': {}})
```

æˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªÂ `AIMessage`Â çš„å“åº”ã€‚å¦å¤–ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨å­—ç¬¦ä¸²æ¥è°ƒç”¨èŠå¤©æ¨¡å‹ã€‚å½“è¾“å…¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ—¶ï¼Œå®ƒä¼šè¢«è½¬æ¢ä¸ºÂ `HumanMessage`Â ï¼Œç„¶åä¼ é€’ç»™åº•å±‚æ¨¡å‹ã€‚

```jupyter
model.invoke("æˆ‘çš„å¸½è¡«å¾ˆå¥½çœ‹ã€‚")
```

```markdown
AIMessage(content='ä½ çš„å¸½è¡«å¬èµ·æ¥å¾ˆæ£’ï¼å¸½è¡«ç¡®å®æ˜¯æ—¢å®ç”¨åˆæ—¶å°šçš„å•å“ï¼Œèƒ½è½»æ¾æ­é…å‡ºå„ç§é£æ ¼ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¯èƒ½è®©ä½ æ›´äº«å—å®ƒçš„å»ºè®®ï¼š\n\n1. **æ­é…çµæ„Ÿ**  \n   - **ä¼‘é—²é£**ï¼šå†…æ­ç™½Tæ¤éœ²å‡ºä¸‹æ‘†ï¼Œé…ç‰›ä»”è£¤å’Œè¿åŠ¨é‹ï¼Œæ¸…çˆ½æœ‰æ´»åŠ›ã€‚  \n   - **è¡—å¤´æ„Ÿ**ï¼šå ç©¿é•¿æ¬¾è¡¬è¡«æˆ–æœºèƒ½é©¬ç”²ï¼Œæ­é…å·¥è£…è£¤å’Œå¸†å¸ƒé‹ã€‚  \n   - **æ…µæ‡’èŒƒå„¿**ï¼šç›´æ¥æ­é…ç‘œä¼½è£¤æˆ–éª‘è¡ŒçŸ­è£¤ï¼Œé€‚åˆå±…å®¶æˆ–æ™¨è·‘ã€‚  \n\n2. **åŠŸèƒ½æ€§ç‚¹ç›**  \n   å¦‚æœå¸½å­æœ‰æŠ½ç»³æˆ–å£è¢‹è®¾è®¡ï¼Œå¯ä»¥å°è¯•ç”¨äº®è‰²é‹å¸¦/åˆ«é’ˆè£…é¥°ï¼Œç¬é—´æå‡ç»†èŠ‚æ„Ÿã€‚\n\n3. **å­£èŠ‚é€‚é…**  \n   - æ˜¥ç§‹å¤–ç©¿ï¼Œå†¬å¤©ä½œä¸ºå¤§è¡£é‡Œçš„ä¸­é—´å±‚ï¼Œéœ²å‡ºå¸½å­å±‚æ¬¡æ„Ÿåè¶³ã€‚  \n\n4. **ä¿å…»å°è´´å£«**  \n   æœºæ´—æ—¶ç¿»é¢ã€æ‹‰å¥½æ‹‰é“¾ï¼Œé¿å…èµ·çƒå’Œå°èŠ±è„±è½ï¼Œèƒ½è®©å®ƒé•¿ä¹…ä¿æŒå¥½çœ‹ã€‚  \n\nå¦‚æœæœ‰ç‰¹åˆ«å–œæ¬¢çš„ç»†èŠ‚ï¼ˆæ¯”å¦‚å›¾æ¡ˆã€å‰ªè£ï¼‰ï¼Œä¸å¦¨åˆ†äº«ä¸€ä¸‹ï¼Œå¯ä»¥å¸®ä½ æŒ–æ˜æ›´å¤šæ­é…ç©æ³•ï¼ ğŸ˜Š', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 238, 'prompt_tokens': 8, 'total_tokens': 246, 'completion_tokens_details': None, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': 0}, 'prompt_cache_hit_tokens': 0, 'prompt_cache_miss_tokens': 8}, 'model_name': 'deepseek-chat', 'system_fingerprint': 'fp_8802369eaa_prod0425fp8', 'id': '0a066bb7-0572-44b1-a109-525a9749bcb7', 'service_tier': None, 'finish_reason': 'stop', 'logprobs': None}, id='run--7857a704-6829-4207-a136-acf20427c7d3-0', usage_metadata={'input_tokens': 8, 'output_tokens': 238, 'total_tokens': 246, 'input_token_details': {'cache_read': 0}, 'output_token_details': {}})
```

Â Tavilyï¼Œè¿™æ˜¯ä¸€ä¸ªä¸“ä¸º LLMs å’Œ RAG ä¼˜åŒ–çš„æœç´¢å¼•æ“ï¼Œè‡´åŠ›äºæä¾›é«˜æ•ˆã€å¿«é€Ÿä¸”æŒä¹…çš„æœç´¢ç»“æœã€‚æ­£å¦‚ä¹‹å‰æåˆ°çš„ï¼Œæ³¨å†Œéå¸¸ä¾¿æ·ï¼Œå¹¶ä¸”æä¾›ä¸°åšçš„å…è´¹å¥—é¤ã€‚

```jupyter lab
get_api_key("TAVILY_API_KEY")
```

```jupyter
from langchain_community.tools.tavily_search import TavilySearchResults

tavily_search = TavilySearchResults(max_results = 3)

results = tavily_search.invoke("LangGraphæ˜¯ä»€ä¹ˆï¼Ÿç®€è¦å›ç­”ã€‚")

results
```

```markdown
[{'title': 'ä»€éº¼æ˜¯LangGraph ä»¥åŠå¦‚ä½•ä½¿ç”¨ï¼Ÿ',
  'url': '[https://www.communeify.com/tw/blog/what-is-langgraph](https://www.communeify.com/tw/blog/what-is-langgraph)',
  'content': 'ç°¡å–®ä¾†èªªï¼ŒLangGraph æ˜¯ä¸€å€‹å°ˆé–€ç”¨ä¾†å»ºç«‹æœ‰ç‹€æ…‹ã€å¤šä»£ç†æ‡‰ç”¨ç¨‹å¼çš„Python å‡½å¼åº«ã€‚æƒ³åƒä¸€ä¸‹ï¼Œå®ƒå°±åƒæ˜¯å¹«ä½ çš„AI ä»£ç†åœ˜éšŠç•«äº†ä¸€å¼µå·¥ä½œæµç¨‹åœ–ã€‚ å®ƒå»ºç«‹åœ¨å¤§å®¶',
  'score': 0.8989177},
 {'title': 'ä¸€æ–‡ææ‡‚LangChain æ–°åˆ©å™¨ï¼šLangGraph åŸåˆ› - CSDNåšå®¢',
  'url': '[https://blog.csdn.net/musicml/article/details/136441895](https://blog.csdn.net/musicml/article/details/136441895)',
  'content': 'LangGraph æ˜¯ä¸€ä¸ªæœ‰ç”¨äºæ„å»ºæœ‰çŠ¶æ€å’Œå¤šè§’è‰²çš„ Agents åº”ç”¨ï¼Œå®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹äº Langchain çš„æ–°æ¡†æ¶ï¼Œè€Œæ˜¯åŸºäº Langchain ä¹‹ä¸Šæ„å»ºçš„ä¸€ä¸ªæ‰©å±•åº“ï¼Œå¯ä»¥ä¸ Langchain ç°æœ‰çš„é“¾ï¼ˆChainsï¼‰ã€LangChain Expression Languageï¼ˆLCELï¼‰ç­‰æ— ç¼åä½œã€‚LangGraph èƒ½å¤Ÿåè°ƒå¤šä¸ª Chainã€Agentã€Tool ç­‰å…±åŒåä½œæ¥å®Œæˆè¾“å…¥ä»»åŠ¡ï¼Œæ”¯æŒ LLM è°ƒç”¨â€œå¾ªç¯â€å’Œ Agent è¿‡ç¨‹çš„æ›´ç²¾ç»†åŒ–æ§åˆ¶ã€‚\nLangGraph çš„å®ç°æ–¹å¼æ˜¯æŠŠä¹‹å‰åŸºäº AgentExecutor çš„é»‘ç›’è°ƒç”¨è¿‡ç¨‹ï¼Œç”¨ä¸€ç§æ–°çš„å½¢å¼æ¥æ„å»ºï¼šçŠ¶æ€å›¾ï¼ˆStateGraphï¼‰ã€‚æŠŠåŸºäº LLM çš„ä»»åŠ¡ï¼ˆæ¯”å¦‚ï¼šRAGã€ä»£ç ç”Ÿæˆç­‰ï¼‰ç»†èŠ‚ç”¨ Graph è¿›è¡Œç²¾ç¡®çš„å®šä¹‰ï¼ˆå®šä¹‰å›¾çš„èŠ‚ç‚¹ä¸è¾¹ï¼‰ï¼Œæœ€ååŸºäºè¿™ä¸ªå›¾æ¥ç¼–è¯‘ç”Ÿæˆåº”ç”¨ã€‚åœ¨ä»»åŠ¡è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œç»´æŒä¸€ä¸ªä¸­å¤®çŠ¶æ€å¯¹è±¡(state)ï¼Œä¼šæ ¹æ®èŠ‚ç‚¹çš„è·³è½¬ä¸æ–­æ›´æ–°ï¼ŒçŠ¶æ€åŒ…å«çš„å±æ€§å¯è‡ªè¡Œå®šä¹‰ã€‚\næˆ‘ä»¬ä¸€èµ·å‰–æä¸‹å®˜æ–¹ RAG åº”ç”¨çš„ Graph æ¡ˆä¾‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä»è€Œæ›´å¥½ç†è§£ LangGraphã€‚ [...] Lan_g_Graph_æ˜¯_Lan_g_Chai_nçš„é«˜çº§åº“ï¼Œä¸ºå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å¸¦æ¥å¾ªç¯è®¡ç®—èƒ½åŠ›ã€‚å®ƒè¶…è¶Šäº†_Lan_g_Chai_nçš„çº¿æ€§å·¥ä½œæµï¼Œé€šè¿‡å¾ªç¯æ”¯æŒå¤æ‚çš„ä»»åŠ¡å¤„ç†ã€‚çŠ¶æ€ï¼šç»´æŠ¤è®¡ç®—è¿‡ç¨‹ä¸­çš„ä¸Šä¸‹æ–‡ï¼Œå®ç°åŸºäºç´¯ç§¯æ•°æ®çš„åŠ¨æ€å†³ç­–ã€‚èŠ‚ç‚¹ï¼šä»£è¡¨è®¡ç®—æ­¥éª¤ï¼Œæ‰§è¡Œç‰¹å®šä»»åŠ¡ï¼Œå¯å®šåˆ¶ä»¥é€‚åº”ä¸åŒå·¥ä½œæµã€‚è¾¹ï¼šè¿æ¥èŠ‚ç‚¹ï¼Œå®šä¹‰è®¡ç®—æµç¨‹ï¼Œæ”¯æŒæ¡ä»¶é€»è¾‘ï¼Œå®ç°å¤æ‚å·¥ä½œæµã€‚_Lan_g_Graph_ç®€åŒ–äº†AIå¼€å‘ï¼Œè‡ªåŠ¨ç®¡ç†çŠ¶æ€ï¼Œä¿æŒä¸Šä¸‹æ–‡ï¼Œä½¿AIèƒ½æ™ºèƒ½å“åº”å˜åŒ–ã€‚å®ƒè®©å¼€å‘è€…ä¸“æ³¨äºåˆ›_æ–°ï¼Œè€ŒéæŠ€æœ¯ç»†èŠ‚ï¼ŒåŒæ—¶ç¡®ä¿åº”ç”¨ç¨‹åºçš„é«˜æ€§èƒ½å’Œå¯é æ€§ã€‚\nä½¿ç”¨ Lan_g_Graph æ„å»ºç”Ÿäº§çº§ AI Agent\nJAvavvvvvçš„åšå®¢\n12-20  1035 [...] Lan_g_Graph æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºæœ‰çŠ¶æ€å’Œå¤šè§’è‰²çš„LLM Apps çš„å¼€æºåº“ï¼Œå¸¸ç”¨äº åˆ›å»ºå•ä»£ç†å’Œå¤šä»£ç†çš„å·¥ä½œæµã€‚ä¸å…¶ä»–LLM æ¡†æ¶ç›¸æ¯”ï¼ŒLan_g_Graph å…·å¤‡ä»¥ä¸‹æ ¸å¿ƒä¼˜åŠ¿å’Œç‰¹æ€§ï¼šâ€¢ å¾ªç¯ä¸åˆ†æ”¯ï¼šå…è®¸å®ç°å¾ªç¯å’Œæ¡ä»¶é€»è¾‘ï¼Œé€‚ç”¨äºå¤§å¤šæ•°ä»£ç†æ¶æ„ï¼ŒåŒºåˆ«äºä»¥æœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰ä¸ºåŸºç¡€çš„è§£å†³æ–¹æ¡ˆã€‚â€¢ æŒä¹…åŒ–ï¼šå†…ç½®è‡ªåŠ¨çŠ¶æ€ä¿å­˜åŠŸèƒ½ï¼Œæ”¯æŒåœ¨ä»»ä½•æ—¶åˆ»æš‚åœå’Œæ¢å¤æ‰§è¡Œï¼Œä¾¿äºé”™ è¯¯æ¢å¤ã€äººç±»å‚ä¸ã€æ—¶å…‰å›æº¯ç­‰å¤æ‚å·¥ä½œæµã€‚â€¢ äººç±»å‚ä¸ï¼šåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¯ä»¥ä¸­æ–­ï¼Œå…è®¸äººç±»å®¡æ ¸æˆ–ç¼–è¾‘ä¸‹ä¸€æ­¥æ“ä½œï¼Œæ”¯æŒã€‚\nLan_g_Graphï¼šæ„å»ºå¤šä»£ç†åŠ¨æ€å·¥ä½œæµçš„å¼€æºæ¡†æ¶ï¼Œæ”¯æŒäººå·¥å¹²é¢„ã€å¾ªç¯ã€æŒä¹…æ€§ç­‰å¤æ‚å·¥ä½œæµè‡ªåŠ¨åŒ–\nCode1994çš„åšå®¢\n01-03  1141',
  'score': 0.8795718},
 {'title': 'LangGraphå®æˆ˜- å“¥ä¸æ˜¯å°èè‰- åšå®¢å›­',
  'url': '[https://www.cnblogs.com/smartloli/p/18276355](https://www.cnblogs.com/smartloli/p/18276355)',
  'content': '2.å†…å®¹ ... LangGraphæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„åº“ï¼Œç”¨äºæ„å»ºåŸºäºå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„æœ‰çŠ¶æ€ã€å¤šå‚ä¸è€…åº”ç”¨ç¨‹åºã€‚å®ƒæ—¨åœ¨åˆ›å»ºä»£ç†å’Œå¤šä»£ç†å·¥ä½œæµï¼Œä»¥å®ç°å¤æ‚çš„ä»»åŠ¡å’Œ',
  'score': 0.8588255}]
```